<ion-header>
  <ion-toolbar style="text-align: center;">
    <ion-title style="color: #0047ab;">
      Mbongo
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="background">
  
  <ion-card style="box-shadow: none !important; border: #72c3fb solid 2px; background-color: #0047ab;" button (click)="getBalAndTransactions()">
    <ion-card-header>
      <ion-card-subtitle style="text-align: left; color: antiquewhite;">Welcome {{username}}</ion-card-subtitle>
      <br>
      <ion-card-title style="color: antiquewhite; font-size: medium;">Balance:</ion-card-title>
      <ion-card-subtitle style="text-align: left; font-size: large; color: antiquewhite;">ZAR {{balance}}</ion-card-subtitle>
      <ion-card-title style="color: antiquewhite; font-size: medium;">Available:</ion-card-title>
      <ion-card-subtitle style="text-align: left; color: antiquewhite; font-size: large;">ZAR {{available}}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <ion-row>
        <ion-col size="6">
          <ion-button #cashIn (click)="cashInCashOut('cashin')" expand="block" fill="solid" shape="" color="success">
            <ion-label style="font-weight: 500;">Cash In</ion-label>
          </ion-button> 
        </ion-col>
        <ion-col size="6">
          <ion-button #cashOut (click)="cashInCashOut('cashout')" expand="block" fill="solid" shape="" color="light" >
            <ion-label style="color: #0047ab;">Cash Out</ion-label>
          </ion-button>
        </ion-col>
      </ion-row>  
    </ion-card-content>
  </ion-card>

  <div style="text-align: center;">
    <ion-label>Start Transaction</ion-label>
  </div>

  <ion-grid fixed class="ion-no-padding">
    <ion-row class="ion-no-padding">
      <ion-col size="6" *ngFor="let col of cardRows" class="ion-no-padding">
        <ion-card button (click)="displayModal(col)" style="height: fit-content;">
          <ion-card-content style="text-align: center;">
            <div>
              <ion-icon slot="start" name="{{col.icon}}" size="large"></ion-icon>
            </div>
            <ion-label>{{col.name}}</ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>  
    </ion-row>  
  </ion-grid>
  <br>
  <br>
  <div style="text-align: center;">
    <ion-label>Previous Transactions</ion-label>
  </div>
  <div *ngIf="transactionCards.length == 0" style="text-align: center;">
    <br>
    <br>
    <br>
    <ion-label>No transactions Available</ion-label>
  </div>
    <ion-card *ngFor="let trans of transactionCards">
      <ion-card-content>
        <div>
          <ion-label>To/From: {{trans.counterAccount}}</ion-label>
        </div>
        <div>
          <ion-label>Date: {{trans.date}}</ion-label>
        </div>
        <div>
          <ion-label>Type: {{trans.status}}</ion-label>
        </div>
        <div>
          <ion-label>Amount: </ion-label>
          <ion-label [ngClass]="{'receipt' : tran.amount[0]=='-', 'payment' : tran.amount[0]!='-'}">{{trans.amount}}</ion-label>
        </div>
        <ion-button *ngIf="trans.type == 'ESCROW' " (click)="approve()" expand="block" fill="solid" shape="">
          <ion-label>{{trans.buttonText}}</ion-label>
        </ion-button>
      </ion-card-content>
    </ion-card>
  

</ion-content>

<style>
  ion-content.background{
    --background: url(../../assets/img/app_background.jpg) 0 0/100% 100% no-repeat;
  }
  .receipt{
    color: green;
  }
  .payment{
    color: red;
  }
</style>

